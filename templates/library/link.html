{% extends 'base.html' %}

{% block head_title %}{{ link["title"] }}{% endblock %}

{% block body_title %}
<h1>{{ link["title"] }}</h1>
<h3>{{ authors_links(link, max=None, display=True) }}</h3>
{% endblock %}

{% block main_section %}
<section class="col-lg-6 offset-lg-1">
  {% if link.get("posts") %}
  <div class="card mb-3">
    <div class="card-header bg-light" title="Referred">
      {% if language == 'en' %}
      Referred to in blog posts
      {% else %}
      Referad i blogginlägg
      {% endif %}
    </div>
    <ul class="list-group list-group-flush">
      {% for post in link["posts"] %}
      <li class="list-group-item">
        {{ post_link(post) }}
      </li>
      {% endfor %}
    </ul>
  </div>
  {% endif %}

  {% if link.get('rating') %}
  <div class="card">
    <div class="card-header bg-light">
      <h5 class="card-title"  title="Rating {{ link['rating'] }}">
        {% if language == 'en' %}
        Rating:
        {% else %}
        Betyg:
        {% endif %}
        {% for i in range(link["rating"]) %}
        <i class="bi bi-star-fill text-warning"></i>
        {% endfor %}
      </h5>
    </div>
    <div class="card-body">
      {% if link.get("reviewed") %}
      <h5>
        {% if language == 'en' %}
        My review
        {% else %}
        Min recension
        {% endif %}
        <small class="text-muted">{{ link['reviewed'] }}</small>
      </h5>
      {% endif %}
      {{ link['html'] | safe }}
    </div>
  </div>
  {% endif %}
</section>
{% endblock %}

{% block main_aside %}
<aside class="col-lg-3 offset-lg-2">

  <div class="card">
    <ul class="list-group list-group-flush">
      <li class="list-group-item">
        <strong>{{ link['reference'] }}</strong>
        <small>
          <a href="references/{{ normalize(link['reference'])}}-yaml.html">YAML</a>
        </small>
      </li>
      <li class="list-group-item">
        {% if language == 'en' %}
        Link
        {% else %}
        Länk
        {% endif %}
        {{ published_link(link['year']) }}
      </li>
      {% if link.get('DOI') %}
      <li class="list-group-item">
        DOI {{ link['doi'] }}
      </li>
      {% endif %}
    </ul>
  </div>
  
  <div class="card mt-3">
    <div class="card-header bg-light" title="Subjects">
      {% if language == 'en' %}
      Subjects
      {% else %}
      Ämnen
      {% endif %}
    </div>
    <div class="card-body">
      {% for subject in link["subjects"] %}
      {{ subject_link(subject) }}
      <br>
      {% endfor %}
    </div>
  </div>

  <div class="card mt-3">
    <div class="card-header" title="External links">
      {% if language == 'en' %}
      External links
      {% else %}
      Externa länkar
      {% endif %}
      <i class="bi bi-box-arrow-up-right"></i>
    </div>
    <ul class="list-group list-group-flush">
      {% if link.get("href") %}
      <li class="list-group-item">
        href
        <a target="_blank" href="{{ link['href'] }}">
          {{ link['href'] }}
        </a>
      </li>
      {% endif %}
      {% if link.get("doi") %}
      <li class="list-group-item">
        DOI
        <a target="_blank" href="https://doi.org/{{ link['doi'] }}">
          {{ link['doi'] }}
        </a>
      </li>
      {% endif %}
    </ul>
  </div>

</aside>
{% endblock %}
